
<div class=" p-3">
  <%= form_with model: @genre do |form| %>
    <div class="row text-center align-items-center ">
      <div class="col-5">
        <div class="input-group mb-3 ">
          <%= form.file_field :photo, class: 'form-control', id:'photo_input'%>
          <%= form.label :photo , class: "form-label", class: 'input-group-text' %>

        </div>
  
      </div>
      
      <div class="col">
        <strong>

          <%= form.label 'Image: ' , class: "form-label"%>
        </strong>

        <div id="image_preview">
           <% if @genre.photo.attached? %>
              <div>
                <%= image_tag @genre.photo, class: "img-thumbnail", width: '200px' %>
              </div>
            <% end %>
        </div>
     

      </div>
    </div>
    <div class="row p-3">

      <div class="col">
          <strong>
            <%= form.label :name, class: "form-label" %>
          </strong>
          

            <p> <br> <%= form.text_field :name, placeholder: "Name", class: 'form-control' %></p>
        
          
      </div>
    </div>
    <div class="row">

      <div class="col">
        <strong>
            <%= form.label :description, class: "form-label" %>
          </strong>
          
        <%= form.text_area :description,  class: "ckeditor form-control", rows: '5', placeholder: 'Description' %>
      </div>
    </div>
    <div class="row pt-5">

      <div class="col text-center">
        <%= form.submit "Done" , class: "btn btn-dark mb-3" %>
        
      </div>
    </div>


  <% end %>
</div>




<script>
document.addEventListener('DOMContentLoaded', function() {
  const photoInput = document.getElementById('photo_input');
  const imagePreview = document.getElementById('image_preview');

  photoInput.addEventListener('change', function(event) {
    const file = event.target.files[0];
    const reader = new FileReader();

    reader.onload = function(event) {
      const imageUrl = event.target.result;
      imagePreview.innerHTML = `<img src="${imageUrl}" class="img-thumbnail"  width='200px' />`;
    };

    reader.readAsDataURL(file);
  });
});
</script>